---
title: Delivery
---

export const themeSettings = {
    bigArticle: true
}

# Delivery
<Subtitle>
    Learn how LiveSession delivers webhook events to your endpoints.
</Subtitle>

## Overview
When an event ready for [webhook](https://en.wikipedia.org/wiki/Webhook) transmission occurs within LiveSession, an event payload is crafted.
If you've set up endpoints for that specific event type, the payload gets lined up for delivery.

These "trigger-ready" events encompass actions ideal for webhook interaction.
For instance, when a session event is created, it's trigger-ready.

Event delivery typically takes mere seconds, though a strict [FIFO order](https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)) isn't assured.
Given potential event volume, the webhook platform prioritizes throughput over rigid sequencing.

Once an event is dispatched, a payload signature is computed and included in the request.
The request sent to your chosen endpoint bears these details:

<Steps>
    <Steps.Item>
        HTTP method is `POST`
    </Steps.Item>
    <Steps.Item>
        Content-Type of the request body is `application/json`
    </Steps.Item>
    <Steps.Item>
        There will be a request header named `LiveSession-Signature` - this includes the request signature which the recipient should verify.
    </Steps.Item>
    <Steps.Item>
        Every request body will contain a JSON object with the following fields:
        <Steps>
            <Steps.Item>
                `message_id` - the message identifier
            </Steps.Item>
            <Steps.Item>
                `webhook_id` - the webhook identifier
            </Steps.Item>
            <Steps.Item>
                `webhook_type` - the webhook type
            </Steps.Item>
            <Steps.Item>
                `api_version` - the webhook API version
            </Steps.Item>
            <Steps.Item>
                `account_id` - the account identifier
            </Steps.Item>
            <Steps.Item>
                `website_id` - the website identifier
            </Steps.Item>
            <Steps.Item>
                `created_at` - the message creation timestamp
            </Steps.Item>
            <Steps.Item>
                `payload` - the event payload
            </Steps.Item>
        </Steps>
    </Steps.Item>
</Steps>

Below is a representation of the entire HTTP request:

```bash
POST /webhooks HTTP/1.1
Host: example.com
Content-Type: application/json; charset=utf-8
LiveSession-Signature: /NLAt29+UdUod1lyzeWcbNigjzGfvtusP44dNKt4Q3U=
User-Agent: LiveSessionWebhooks/1.0

{
  "message_id": "d5932de4-a8da-4546-4439-3c640ba8dc05",
  "webhook_id": "542de45",
  "webhook_type": "session.event",
  "api_version": "v1.0",
  "account_id": "3ca3b1b",
  "website_id": "8d53ea3",
  "created_at": 1691161881,
  "payload": {
    "visitor": {
      "id": "e4d5932d-4439-4546-a8da-a8d40bc053c6",
      "name": "John Doe",
      "email": "john.doe@livesession.io",
      "params": [
        {
          "name": "plan",
          "value": "pro"
        }
      ],
      "geolocation": {
        "country_code": "PL",
        "city": "Wroclaw",
        "region": "Dolnoslaskie"
      }
    },
    "event_name": "Error",
    "time": 1691161881,
    "count": 1,
    "value": "ProductCatalog: product is not valid"
  }
}
```

## Throttling
To prevent your servers from being overwhelmed or unintentionally participating in a service disruption on your webhook endpoint,
LiveSession limits the number of events sent for a given webhook to a maximum of `1000 per minute`.

If you've configured an endpoint for a high-volume event flow, like a frequently triggered custom event during user sessions,
expect possible webhook delays.
When the number of events for an endpoint exceeds `1000 per minute`, the extra events will be queued].

If the events happen really fast for a little while and then slow down, all the events might still arrive, but it could take longer than when they first happened.
But if the fast rate continues for a long time, some events might not be delivered.
If an event is undeliverable for `24 hours`, it's treated as **failed**, and no more tries will be made.

<Callout>
The limit of 1000 events per minute is per account.
</Callout>

## Retry behavior
LiveSession attempts to deliver a given event to your webhook endpoint for *up to 8 hours* with an exponential [backoff](https://en.wikipedia.org/wiki/Exponential_backoff)
in `beetwen 1-10 minutes` interval gap from the previous attempt.